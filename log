#!/bin/bash


log.start()
{
  This=$(which $0)
  this=$(basename $This)


  if [ "$this" = "log" ]; then
    echo "starting $0"
  else
    echo "sourcing $0"
  fi

  log.init

}

log.init()
{
  if [ -n "$LOG_LEVEL" ]; then
    echo "log already inititalized"
  echo "debug: ENUM_LOG_LEVEL=$ENUM_LOG_LEVEL"
  echo "debug: LOG_LEVEL_ARRAY=(${LOG_LEVEL_ARRAY[*]})"
    LOG_LEVEL_ARRAY=$( IFS=:; printf '%s' "${ENUM_LOG_LEVEL}" )
    log.status
    return 0
  fi

  LOG_LEVEL_ARRAY=(SILENT ERROR WARN USER INFO DEBUG)
  ENUM_LOG_LEVEL=$( printf '%s:' "${LOG_LEVEL_ARRAY[@]}" )  
  export ENUM_LOG_LEVEL
  export LOG_LEVEL=3
  log.status
}

log.status()
{
  echo "current log level is ${LOG_LEVEL_ARRAY[$LOG_LEVEL]}"
  echo "debug: ENUM_LOG_LEVEL=$ENUM_LOG_LEVEL"
  echo "debug: LOG_LEVEL_ARRAY=(${LOG_LEVEL_ARRAY[*]})"
}



debug.log()
{
  echo -e "- $@"
}



log.start "$@"