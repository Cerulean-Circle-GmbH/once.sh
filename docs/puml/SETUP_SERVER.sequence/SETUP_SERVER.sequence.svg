<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="2371px" preserveAspectRatio="none" style="width:3060px;height:2371px;background:#FFFFFF;" version="1.1" viewBox="0 0 3060 2371" width="3060px" zoomAndPan="magnify"><defs/><g><rect height="847.8906" style="stroke:#000000;stroke-width:1.5;fill:none;" width="2690.5" x="75" y="127.7988"/><rect height="816.5801" style="stroke:#000000;stroke-width:1.5;fill:none;" width="2670.5" x="85" y="152.1094"/><rect height="411.9922" style="stroke:#000000;stroke-width:1.5;fill:none;" width="2650.5" x="95" y="400.1465"/><rect height="235.4844" style="stroke:#000000;stroke-width:1.5;fill:none;" width="2429" x="306.5" y="511.0332"/><rect height="324.7266" style="stroke:#000000;stroke-width:1.5;fill:none;" width="2970" x="10" y="989.6895"/><rect height="630.166" style="stroke:#000000;stroke-width:1.5;fill:none;" width="2735.5" x="10" y="1328.416"/><rect height="383.9922" style="stroke:#000000;stroke-width:1.5;fill:none;" width="2429" x="306.5" y="1453.6582"/><rect height="240.7949" style="stroke:#000000;stroke-width:1.5;fill:none;" width="3044" x="10" y="1972.582"/><rect height="150.8633" style="stroke:#000000;stroke-width:1.5;fill:none;" width="1152.5" x="1891.5" y="2055.5137"/><rect height="46.6211" style="stroke:#000000;stroke-width:1.5;fill:none;" width="542.5" x="10" y="2227.377"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="41" x2="41" y1="81.4883" y2="2290.998"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="128" x2="128" y1="81.4883" y2="2290.998"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="177" x2="177" y1="81.4883" y2="2290.998"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="354.5" x2="354.5" y1="81.4883" y2="2290.998"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="472.5" x2="472.5" y1="81.4883" y2="2290.998"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="886" x2="886" y1="81.4883" y2="2290.998"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="1500" x2="1500" y1="81.4883" y2="2290.998"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="1924.5" x2="1924.5" y1="81.4883" y2="2290.998"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="2705.5" x2="2705.5" y1="81.4883" y2="2290.998"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="2948" x2="2948" y1="81.4883" y2="2290.998"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="3014" x2="3014" y1="81.4883" y2="2290.998"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="37" x="20" y="78.5352">Actor</text><ellipse cx="41.5" cy="13.5" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M41.5,21.5 L41.5,48.5 M28.5,29.5 L54.5,29.5 M41.5,48.5 L28.5,63.5 M41.5,48.5 L54.5,63.5 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="37" x="20" y="2303.5332">Actor</text><ellipse cx="41.5" cy="2314.9863" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M41.5,2322.9863 L41.5,2349.9863 M28.5,2330.9863 L54.5,2330.9863 M41.5,2349.9863 L28.5,2364.9863 M41.5,2349.9863 L54.5,2364.9863 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="47" x="105" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="33" x="112" y="70.5352">state</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="47" x="105" y="2289.998"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="33" x="112" y="2310.5332">state</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="30" x="162" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="16" x="169" y="70.5352">sh</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="30" x="162" y="2289.998"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="16" x="169" y="2310.5332">sh</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="77" x="316.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63" x="323.5" y="70.5352">init/oosh</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="77" x="316.5" y="2289.998"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63" x="323.5" y="2310.5332">init/oosh</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="139" x="403.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="125" x="410.5" y="70.5352">init/deinstall.oosh</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="139" x="403.5" y="2289.998"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="125" x="410.5" y="2310.5332">init/deinstall.oosh</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="46" x="863" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="32" x="870" y="70.5352">ossh</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="46" x="863" y="2289.998"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="32" x="870" y="2310.5332">ossh</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="32" x="1484" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="18" x="1491" y="70.5352">oo</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="32" x="1484" y="2289.998"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="18" x="1491" y="2310.5332">oo</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="47" x="1901.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="33" x="1908.5" y="70.5352">bash</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="47" x="1901.5" y="2289.998"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="33" x="1908.5" y="2310.5332">bash</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="39" x="2686.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="25" x="2693.5" y="70.5352">this</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="39" x="2686.5" y="2289.998"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="25" x="2693.5" y="2310.5332">this</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="44" x="2926" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="30" x="2933" y="70.5352">user</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="44" x="2926" y="2289.998"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="30" x="2933" y="2310.5332">user</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="40" x="2994" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="26" x="3001" y="70.5352">exit</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="40" x="2994" y="2289.998"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="26" x="3001" y="2310.5332">exit</text><polygon fill="#181818" points="116.5,108.7988,126.5,112.7988,116.5,116.7988,120.5,112.7988" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="41.5" x2="122.5" y1="112.7988" y2="112.7988"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="63" x="48.5" y="108.0566">state next</text><path d="M75,127.7988 L187,127.7988 L187,135.1094 L177,145.1094 L75,145.1094 L75,127.7988 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="847.8906" style="stroke:#000000;stroke-width:1.5;" width="2690.5" x="75" y="127.7988"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="67" x="90" y="141.3672">state next</text><path d="M85,152.1094 L147,152.1094 L147,159.4199 L137,169.4199 L85,169.4199 L85,152.1094 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="816.5801" style="stroke:#000000;stroke-width:1.5;" width="2670.5" x="85" y="152.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="100" y="165.6777">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="151" x="162" y="164.7441">[state [0]    = not.installed]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="85" x2="2755.5" y1="170.4199" y2="170.4199"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="138" x="90" y="181.0547">[state [1]    = initialized]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="85" x2="2755.5" y1="185.375" y2="185.375"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="112" x="90" y="196.0098">[state [2]    = setup]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="85" x2="2755.5" y1="200.3301" y2="200.3301"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="167" x="90" y="210.9648">[state [3]    = all.states.added]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="85" x2="2755.5" y1="215.2852" y2="215.2852"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="120" x="90" y="225.9199">[state [4]    = started]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="85" x2="2755.5" y1="230.2402" y2="230.2402"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="203" x="90" y="240.875">[state [11]   = remote.install.started]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="85" x2="2755.5" y1="245.1953" y2="245.1953"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="191" x="90" y="255.8301">[state [12]   = local.install.started]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="85" x2="2755.5" y1="260.1504" y2="260.1504"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="196" x="90" y="270.7852">[state [13]   = priviledges.checked]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="85" x2="2755.5" y1="275.1055" y2="275.1055"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="172" x="90" y="285.7402">[state [20]   = user.rights.only]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="85" x2="2755.5" y1="290.0605" y2="290.0605"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="205" x="90" y="300.6953">[state [21]   = user.installation.done]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="85" x2="2755.5" y1="305.0156" y2="305.0156"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="185" x="90" y="315.6504">[state [22]   = user.mode.release]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="85" x2="2755.5" y1="319.9707" y2="319.9707"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="166" x="90" y="330.6055">[state [23]   = user.mode.dev]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="85" x2="2755.5" y1="334.9258" y2="334.9258"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="144" x="90" y="345.5605">[state [30]   = root.rights]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="85" x2="2755.5" y1="349.8809" y2="349.8809"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="251" x="90" y="360.5156">[state [31]   = root.shared.dev.folder.created]</text><polygon fill="#181818" points="1488,381.1465,1498,385.1465,1488,389.1465,1492,385.1465" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="128.5" x2="1494" y1="385.1465" y2="385.1465"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="489" x="135.5" y="380.4043">oo private.check.root.shared.dev.folder.created $script $stageTo $stateFound</text><path d="M95,400.1465 L157,400.1465 L157,407.457 L147,417.457 L95,417.457 L95,400.1465 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="411.9922" style="stroke:#000000;stroke-width:1.5;" width="2650.5" x="95" y="400.1465"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="110" y="413.7148">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="57" x="172" y="412.7813">[as a root]</text><line style="stroke:#181818;stroke-width:1.0;" x1="1500" x2="1542" y1="438.7676" y2="438.7676"/><line style="stroke:#181818;stroke-width:1.0;" x1="1542" x2="1542" y1="438.7676" y2="451.7676"/><line style="stroke:#181818;stroke-width:1.0;" x1="1501" x2="1542" y1="451.7676" y2="451.7676"/><polygon fill="#181818" points="1511,447.7676,1501,451.7676,1511,455.7676,1507,451.7676" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="411" x="1507" y="434.0254">return to oo private.check.root.shared.dev.folder.created AS USER</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="95" x2="2745.5" y1="460.7676" y2="460.7676"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="48" x="100" y="471.4023">[as user]</text><polygon fill="#181818" points="366,492.0332,356,496.0332,366,500.0332,362,496.0332" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="360" x2="1499" y1="496.0332" y2="496.0332"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="371" x="372" y="491.291">sudo /oosh/init/oosh mode user user.$USER localhost dev</text><path d="M306.5,511.0332 L525.5,511.0332 L525.5,518.3438 L515.5,528.3438 L306.5,528.3438 L306.5,511.0332 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="235.4844" style="stroke:#000000;stroke-width:1.5;" width="2429" x="306.5" y="511.0332"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="174" x="321.5" y="524.6016">Install as root from $USER</text><polygon fill="#181818" points="1913,545.6543,1923,549.6543,1913,553.6543,1917,549.6543" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="355" x2="1919" y1="549.6543" y2="549.6543"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="957" x="362" y="544.9121">"$BASH_FILE" -xc "$OOSH_DIR/this call ossh install.continue.local $SSH_CONFIG_FROM_REMOTE $SSH_CONFIG_NAME_USED_FOR_LOCAL $DEV_MODE"</text><polygon fill="#181818" points="2694,574.9648,2704,578.9648,2694,582.9648,2698,578.9648" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1925" x2="2700" y1="578.9648" y2="578.9648"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="757" x="1932" y="574.2227">this call ossh install.continue.local $SSH_CONFIG_FROM_REMOTE $SSH_CONFIG_NAME_USED_FOR_LOCAL $DEV_MODE"</text><polygon fill="#181818" points="897,604.2754,887,608.2754,897,612.2754,893,608.2754" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="891" x2="2705" y1="608.2754" y2="608.2754"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="703" x="903" y="603.5332">ossh install.continue.local $SSH_CONFIG_FROM_REMOTE $SSH_CONFIG_NAME_USED_FOR_LOCAL $DEV_MODE"</text><line style="stroke:#181818;stroke-width:1.0;" x1="886" x2="928" y1="637.5859" y2="637.5859"/><line style="stroke:#181818;stroke-width:1.0;" x1="928" x2="928" y1="637.5859" y2="650.5859"/><line style="stroke:#181818;stroke-width:1.0;" x1="887" x2="928" y1="650.5859" y2="650.5859"/><polygon fill="#181818" points="897,646.5859,887,650.5859,897,654.5859,893,650.5859" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="893" y="632.8438">fix user config</text><polygon fill="#181818" points="2694,675.8965,2704,679.8965,2694,683.8965,2698,679.8965" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="886" x2="2700" y1="679.8965" y2="679.8965"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="893" y="675.1543">return 0</text><polygon fill="#181818" points="1936,705.207,1926,709.207,1936,713.207,1932,709.207" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1930" x2="2705" y1="709.207" y2="709.207"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="1942" y="704.4648">return 0</text><polygon fill="#181818" points="366,734.5176,356,738.5176,366,742.5176,362,738.5176" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="360" x2="1924" y1="738.5176" y2="738.5176"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="372" y="733.7754">return 0</text><polygon fill="#181818" points="1488,770.8281,1498,774.8281,1488,778.8281,1492,774.8281" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="355" x2="1494" y1="774.8281" y2="774.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="362" y="770.0859">return 0</text><polygon fill="#181818" points="139.5,800.1387,129.5,804.1387,139.5,808.1387,135.5,804.1387" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="133.5" x2="1499" y1="804.1387" y2="804.1387"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="217" x="145.5" y="799.3965">return 0; "installed root form user"</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="85" x2="2755.5" y1="820.1387" y2="820.1387"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="180" x="90" y="830.7734">[[32]   = root.dev.keys.installed]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="85" x2="2755.5" y1="835.0938" y2="835.0938"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="174" x="90" y="845.7285">[[33]   = root.installation.done]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="85" x2="2755.5" y1="850.0488" y2="850.0488"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="217" x="90" y="860.6836">[[40]   = user.shared.dev.folder.linked]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="85" x2="2755.5" y1="865.0039" y2="865.0039"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="252" x="90" y="875.6387">[[41]   = user.state.machine.synced.with.root]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="85" x2="2755.5" y1="879.959" y2="879.959"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="177" x="90" y="890.5938">[[50]   = headless.setup.started]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="85" x2="2755.5" y1="894.9141" y2="894.9141"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="185" x="90" y="905.5488">[[51]   = headless.setup.finished]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="85" x2="2755.5" y1="909.8691" y2="909.8691"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="155" x="90" y="920.5039">[[60]   = once.setup.started]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="85" x2="2755.5" y1="924.8242" y2="924.8242"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="163" x="90" y="935.459">[[61]   = once.setup.finished]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="85" x2="2755.5" y1="939.7793" y2="939.7793"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="101" x="90" y="950.4141">[[99]   = finished]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="85" x2="2755.5" y1="954.7344" y2="954.7344"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="122" x="90" y="965.3691">[[6]    = to.be.deleted]</text><path d="M10,989.6895 L169,989.6895 L169,997 L159,1007 L10,1007 L10,989.6895 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="324.7266" style="stroke:#000000;stroke-width:1.5;" width="2970" x="10" y="989.6895"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="114" x="25" y="1003.2578">Local Installation</text><polygon fill="#181818" points="343,1024.3105,353,1028.3105,343,1032.3105,347,1028.3105" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="41.5" x2="349" y1="1028.3105" y2="1028.3105"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59" x="48.5" y="1023.5684">init/oosh</text><polygon fill="#181818" points="188,1053.6211,178,1057.6211,188,1061.6211,184,1057.6211" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="182" x2="354" y1="1057.6211" y2="1057.6211"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="12" x="194" y="1052.8789">1.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138" x="210" y="1052.8789">!/bin/sh ### shebang</text><polygon fill="#181818" points="1913,1082.9316,1923,1086.9316,1913,1090.9316,1917,1086.9316" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="177" x2="1919" y1="1086.9316" y2="1086.9316"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131" x="184" y="1082.1895">bash this localInstall</text><polygon fill="#181818" points="2694,1112.2422,2704,1116.2422,2694,1120.2422,2698,1116.2422" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1925" x2="2700" y1="1116.2422" y2="1116.2422"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97" x="1932" y="1111.5">this localInstall</text><polygon fill="#181818" points="1936,1141.5527,1926,1145.5527,1936,1149.5527,1932,1145.5527" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1930" x2="2705" y1="1145.5527" y2="1145.5527"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="12" x="1942" y="1140.8105">1.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="206" x="1958" y="1140.8105">!/usr/bin/env bash ### shebang</text><polygon fill="#181818" points="1511,1170.8633,1501,1174.8633,1511,1178.8633,1507,1174.8633" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1505" x2="2705" y1="1174.8633" y2="1174.8633"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="244" x="1517" y="1170.1211">oo state # initializes the state machine</text><polygon fill="#181818" points="2936,1215.4844,2946,1219.4844,2936,1223.4844,2940,1219.4844" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="2706" x2="2942" y1="1219.4844" y2="1219.4844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="90" x="2713" y="1199.4316">user get home</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="214" x="2717" y="1214.7422"># hack to make sure the pm is set</text><polygon fill="#181818" points="1936,1244.7949,1926,1248.7949,1936,1252.7949,1932,1248.7949" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1930" x2="2705" y1="1248.7949" y2="1248.7949"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99" x="1942" y="1244.0527">starts new bash</text><line style="stroke:#181818;stroke-width:1.0;" x1="1925" x2="1967" y1="1293.416" y2="1293.416"/><line style="stroke:#181818;stroke-width:1.0;" x1="1967" x2="1967" y1="1293.416" y2="1306.416"/><line style="stroke:#181818;stroke-width:1.0;" x1="1926" x2="1967" y1="1306.416" y2="1306.416"/><polygon fill="#181818" points="1936,1302.416,1926,1306.416,1936,1310.416,1932,1306.416" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="1932" y="1273.3633">source .bashrc</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="204" x="1936" y="1288.6738">[oosh sshConfig] has started &gt; |</text><path d="M10,1328.416 L185,1328.416 L185,1335.7266 L175,1345.7266 L10,1345.7266 L10,1328.416 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="630.166" style="stroke:#000000;stroke-width:1.5;" width="2735.5" x="10" y="1328.416"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="130" x="25" y="1341.9844">Remote Installation</text><polygon fill="#181818" points="874,1363.0371,884,1367.0371,874,1371.0371,878,1367.0371" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="41.5" x2="880" y1="1367.0371" y2="1367.0371"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="205" x="48.5" y="1362.2949">ossh install &lt;remoteSSHconfig&gt;</text><line style="stroke:#181818;stroke-width:1.0;" x1="886" x2="928" y1="1396.3477" y2="1396.3477"/><line style="stroke:#181818;stroke-width:1.0;" x1="928" x2="928" y1="1396.3477" y2="1409.3477"/><line style="stroke:#181818;stroke-width:1.0;" x1="887" x2="928" y1="1409.3477" y2="1409.3477"/><polygon fill="#181818" points="897,1405.3477,887,1409.3477,897,1413.3477,893,1409.3477" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113" x="893" y="1391.6055">private.push.oosh</text><polygon fill="#181818" points="366,1434.6582,356,1438.6582,366,1442.6582,362,1438.6582" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="360" x2="885" y1="1438.6582" y2="1438.6582"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="507" x="372" y="1433.916">init/oosh mode ssh &lt;remoteSSHconfig&gt; &lt;localSSHconfig&gt; &lt;localOSSH_MODE&gt;</text><path d="M306.5,1453.6582 L368.5,1453.6582 L368.5,1460.9688 L358.5,1470.9688 L306.5,1470.9688 L306.5,1453.6582 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="383.9922" style="stroke:#000000;stroke-width:1.5;" width="2429" x="306.5" y="1453.6582"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="321.5" y="1467.2266">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="62" x="383.5" y="1466.293">[mode ssh]</text><polygon fill="#181818" points="1913,1488.2793,1923,1492.2793,1913,1496.2793,1917,1492.2793" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="355" x2="1919" y1="1492.2793" y2="1492.2793"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="957" x="362" y="1487.5371">"$BASH_FILE" -xc "$OOSH_DIR/this call ossh install.continue.local $SSH_CONFIG_FROM_REMOTE $SSH_CONFIG_NAME_USED_FOR_LOCAL $DEV_MODE"</text><polygon fill="#181818" points="2694,1517.5898,2704,1521.5898,2694,1525.5898,2698,1521.5898" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1925" x2="2700" y1="1521.5898" y2="1521.5898"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="757" x="1932" y="1516.8477">this call ossh install.continue.local $SSH_CONFIG_FROM_REMOTE $SSH_CONFIG_NAME_USED_FOR_LOCAL $DEV_MODE"</text><polygon fill="#181818" points="897,1546.9004,887,1550.9004,897,1554.9004,893,1550.9004" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="891" x2="2705" y1="1550.9004" y2="1550.9004"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="703" x="903" y="1546.1582">ossh install.continue.local $SSH_CONFIG_FROM_REMOTE $SSH_CONFIG_NAME_USED_FOR_LOCAL $DEV_MODE"</text><polygon fill="#181818" points="2694,1576.2109,2704,1580.2109,2694,1584.2109,2698,1580.2109" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="886" x2="2700" y1="1580.2109" y2="1580.2109"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="893" y="1575.4688">return 0</text><polygon fill="#181818" points="1936,1605.5215,1926,1609.5215,1936,1613.5215,1932,1609.5215" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1930" x2="2705" y1="1609.5215" y2="1609.5215"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="1942" y="1604.7793">return 0</text><polygon fill="#181818" points="366,1634.832,356,1638.832,366,1642.832,362,1638.832" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="360" x2="1924" y1="1638.832" y2="1638.832"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="372" y="1634.0898">return 0</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="306.5" x2="2735.5" y1="1647.832" y2="1647.832"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="67" x="311.5" y="1658.4668">[mode user]</text><polygon fill="#181818" points="1913,1679.0977,1923,1683.0977,1913,1687.0977,1917,1683.0977" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="355" x2="1919" y1="1683.0977" y2="1683.0977"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="957" x="362" y="1678.3555">"$BASH_FILE" -xc "$OOSH_DIR/this call ossh install.continue.local $SSH_CONFIG_FROM_REMOTE $SSH_CONFIG_NAME_USED_FOR_LOCAL $DEV_MODE"</text><polygon fill="#181818" points="2694,1708.4082,2704,1712.4082,2694,1716.4082,2698,1712.4082" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1925" x2="2700" y1="1712.4082" y2="1712.4082"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="757" x="1932" y="1707.666">this call ossh install.continue.local $SSH_CONFIG_FROM_REMOTE $SSH_CONFIG_NAME_USED_FOR_LOCAL $DEV_MODE"</text><polygon fill="#181818" points="897,1737.7188,887,1741.7188,897,1745.7188,893,1741.7188" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="891" x2="2705" y1="1741.7188" y2="1741.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="703" x="903" y="1736.9766">ossh install.continue.local $SSH_CONFIG_FROM_REMOTE $SSH_CONFIG_NAME_USED_FOR_LOCAL $DEV_MODE"</text><polygon fill="#181818" points="2694,1767.0293,2704,1771.0293,2694,1775.0293,2698,1771.0293" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="886" x2="2700" y1="1771.0293" y2="1771.0293"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="893" y="1766.2871">return 0</text><polygon fill="#181818" points="1936,1796.3398,1926,1800.3398,1936,1804.3398,1932,1800.3398" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1930" x2="2705" y1="1800.3398" y2="1800.3398"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="1942" y="1795.5977">return 0</text><polygon fill="#181818" points="366,1825.6504,356,1829.6504,366,1833.6504,362,1829.6504" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="360" x2="1924" y1="1829.6504" y2="1829.6504"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="372" y="1824.9082">return 0</text><polygon fill="#181818" points="874,1861.9609,884,1865.9609,874,1869.9609,878,1865.9609" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="355" x2="880" y1="1865.9609" y2="1865.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="362" y="1861.2188">return 0</text><line style="stroke:#181818;stroke-width:1.0;" x1="886" x2="928" y1="1895.2715" y2="1895.2715"/><line style="stroke:#181818;stroke-width:1.0;" x1="928" x2="928" y1="1895.2715" y2="1908.2715"/><line style="stroke:#181818;stroke-width:1.0;" x1="887" x2="928" y1="1908.2715" y2="1908.2715"/><polygon fill="#181818" points="897,1904.2715,887,1908.2715,897,1912.2715,893,1908.2715" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="600" x="893" y="1890.5293">ssh $sshConfigHost "bash /home/$user/oosh/ossh continue.local.install from $(ossh.get.url)"</text><line style="stroke:#181818;stroke-width:1.0;" x1="886" x2="928" y1="1937.582" y2="1937.582"/><line style="stroke:#181818;stroke-width:1.0;" x1="928" x2="928" y1="1937.582" y2="1950.582"/><line style="stroke:#181818;stroke-width:1.0;" x1="887" x2="928" y1="1950.582" y2="1950.582"/><polygon fill="#181818" points="897,1946.582,887,1950.582,897,1954.582,893,1950.582" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="279" x="893" y="1932.8398">ossh.install.finish.local &lt;remoteSSHconfig&gt;</text><path d="M10,1972.582 L275,1972.582 L275,1979.8926 L265,1989.8926 L10,1989.8926 L10,1972.582 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="240.7949" style="stroke:#000000;stroke-width:1.5;" width="3044" x="10" y="1972.582"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="220" x="25" y="1986.1504">Reconfiguration and Exit of oosh</text><polygon fill="#181818" points="3002,2007.2031,3012,2011.2031,3002,2015.2031,3006,2011.2031" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="41.5" x2="3008" y1="2011.2031" y2="2011.2031"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="270" x="48.5" y="2006.4609">exit $ERROR_CODE_RECONFIG(defualt is 7)</text><polygon fill="#181818" points="2717,2036.5137,2707,2040.5137,2717,2044.5137,2713,2040.5137" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="2711" x2="3013" y1="2040.5137" y2="2040.5137"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="69" x="2723" y="2035.7715">this.restart</text><path d="M1891.5,2055.5137 L1953.5,2055.5137 L1953.5,2062.8242 L1943.5,2072.8242 L1891.5,2072.8242 L1891.5,2055.5137 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="150.8633" style="stroke:#000000;stroke-width:1.5;" width="1152.5" x="1891.5" y="2055.5137"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="1906.5" y="2069.082">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="272" x="1968.5" y="2068.1484">[$RETURN_VALUE = $ERROR_CODE_RECONFIG]</text><line style="stroke:#181818;stroke-width:1.0;" x1="2706" x2="2748" y1="2109.4453" y2="2109.4453"/><line style="stroke:#181818;stroke-width:1.0;" x1="2748" x2="2748" y1="2109.4453" y2="2122.4453"/><line style="stroke:#181818;stroke-width:1.0;" x1="2707" x2="2748" y1="2122.4453" y2="2122.4453"/><polygon fill="#181818" points="2717,2118.4453,2707,2122.4453,2717,2126.4453,2713,2122.4453" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107" x="2713" y="2089.3926">this.restart again</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="154" x="2717" y="2104.7031"># exited back into this 7</text><polygon fill="#181818" points="1936,2163.0664,1926,2167.0664,1936,2171.0664,1932,2167.0664" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1930" x2="2705" y1="2167.0664" y2="2167.0664"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="1942" y="2147.0137">source .bashrc</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="288" x="1946" y="2162.3242">[oosh sshConfig] has started reconfigured &gt; |</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1891.5" x2="3044" y1="2176.0664" y2="2176.0664"/><polygon fill="#181818" points="3002,2194.377,3012,2198.377,3002,2202.377,3006,2198.377" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="2706" x2="3008" y1="2198.377" y2="2198.377"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="284" x="2713" y="2193.6348">finally exiting oosh (in this.start case restart)</text><path d="M10,2227.377 L195,2227.377 L195,2234.6875 L185,2244.6875 L10,2244.6875 L10,2227.377 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="46.6211" style="stroke:#000000;stroke-width:1.5;" width="542.5" x="10" y="2227.377"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="140" x="25" y="2240.9453">Local De-Installation</text><polygon fill="#181818" points="461,2261.998,471,2265.998,461,2269.998,465,2265.998" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="41.5" x2="467" y1="2265.998" y2="2265.998"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="48.5" y="2261.2559">init/deinstall.oosh</text><!--MD5=[8ae4288c54e8778326072407eaa45893]
@startuml
actor Actor as a
participant state
participant sh
participant "init/oosh" as oosh 
participant "init/deinstall.oosh" as deinstall.oosh 
participant ossh
participant oo
participant bash
participant this

a -> state: state next
group state next
    alt state [0]    = not.installed
    else state [1]    = initialized
    else state [2]    = setup
    else state [3]    = all.states.added
    else state [4]    = started
    else state [11]   = remote.install.started
    else state [12]   = local.install.started
    else state [13]   = priviledges.checked
    else state [20]   = user.rights.only
    else state [21]   = user.installation.done
    else state [22]   = user.mode.release
    else state [23]   = user.mode.dev
    else state [30]   = root.rights
    else state [31]   = root.shared.dev.folder.created
        state -> oo: oo private.check.root.shared.dev.folder.created $script $stageTo $stateFound
        alt as a root
            oo -> oo: return to oo private.check.root.shared.dev.folder.created AS USER
        else as user
            oo -> oosh: sudo ~/oosh/init/oosh mode user user.$USER localhost dev
            group Install as root from $USER
                    oosh -> bash: "$BASH_FILE" -xc "$OOSH_DIR/this call ossh install.continue.local $SSH_CONFIG_FROM_REMOTE $SSH_CONFIG_NAME_USED_FOR_LOCAL $DEV_MODE"
                    bash -> this: this call ossh install.continue.local $SSH_CONFIG_FROM_REMOTE $SSH_CONFIG_NAME_USED_FOR_LOCAL $DEV_MODE"
                    this -> ossh: ossh install.continue.local $SSH_CONFIG_FROM_REMOTE $SSH_CONFIG_NAME_USED_FOR_LOCAL $DEV_MODE"
                    ossh -> ossh: fix user config
                    ossh -> this: return 0
                    this -> bash: return 0
                    bash -> oosh: return 0
            end
            oosh -> oo: return 0
            oo -> state: return 0; "installed root form user"
        end
    else [32]   = root.dev.keys.installed
    else [33]   = root.installation.done
    else [40]   = user.shared.dev.folder.linked
    else [41]   = user.state.machine.synced.with.root
    else [50]   = headless.setup.started
    else [51]   = headless.setup.finished
    else [60]   = once.setup.started
    else [61]   = once.setup.finished
    else [99]   = finished
    else [6]    = to.be.deleted
    end
end

group Local Installation
    a -> oosh: init/oosh
    oosh -> sh: #!/bin/sh ### shebang
    sh -> bash: bash this localInstall
    bash -> this: this localInstall
    this -> bash: #!/usr/bin/env bash ### shebang
    this -> oo: oo state # initializes the state machine
    this -> user: user get home \n # hack to make sure the pm is set
    this -> bash: starts new bash
    bash -> bash: source .bashrc \n [oosh sshConfig] has started > |
end
group Remote Installation

    a -> ossh: ossh install <remoteSSHconfig> 

    ossh -> ossh: private.push.oosh
    ossh -> oosh: init/oosh mode ssh <remoteSSHconfig> <localSSHconfig> <localOSSH_MODE>
    alt mode ssh
        oosh -> bash: "$BASH_FILE" -xc "$OOSH_DIR/this call ossh install.continue.local $SSH_CONFIG_FROM_REMOTE $SSH_CONFIG_NAME_USED_FOR_LOCAL $DEV_MODE"
        bash -> this: this call ossh install.continue.local $SSH_CONFIG_FROM_REMOTE $SSH_CONFIG_NAME_USED_FOR_LOCAL $DEV_MODE"
        this -> ossh: ossh install.continue.local $SSH_CONFIG_FROM_REMOTE $SSH_CONFIG_NAME_USED_FOR_LOCAL $DEV_MODE"
        ossh -> this: return 0
        this -> bash: return 0
        bash -> oosh: return 0
    else mode user
        oosh -> bash: "$BASH_FILE" -xc "$OOSH_DIR/this call ossh install.continue.local $SSH_CONFIG_FROM_REMOTE $SSH_CONFIG_NAME_USED_FOR_LOCAL $DEV_MODE"
        bash -> this: this call ossh install.continue.local $SSH_CONFIG_FROM_REMOTE $SSH_CONFIG_NAME_USED_FOR_LOCAL $DEV_MODE"
        this -> ossh: ossh install.continue.local $SSH_CONFIG_FROM_REMOTE $SSH_CONFIG_NAME_USED_FOR_LOCAL $DEV_MODE"
        ossh -> this: return 0
        this -> bash: return 0
        bash -> oosh: return 0
    end
    oosh -> ossh: return 0
    
    ossh -> ossh: ssh $sshConfigHost "bash /home/$user/oosh/ossh continue.local.install from $(ossh.get.url)"
    ossh -> ossh: ossh.install.finish.local <remoteSSHconfig>
end
group Reconfiguration and Exit of oosh
    a -> exit: exit $ERROR_CODE_RECONFIG(defualt is 7)
    exit -> this: this.restart
    alt $RETURN_VALUE = $ERROR_CODE_RECONFIG
        this -> this: this.restart again \n # exited back into this 7
        this -> bash: source .bashrc \n [oosh sshConfig] has started reconfigured > |
    else
        this -> exit: finally exiting oosh (in this.start case restart)
    end
end
group Local De-Installation
    a -> deinstall.oosh: init/deinstall.oosh
end
@enduml

PlantUML version 1.2022.5(Sat Apr 30 12:55:52 CEST 2022)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: GB
--></g></svg>