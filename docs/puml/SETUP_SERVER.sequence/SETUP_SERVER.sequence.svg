<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="2502px" preserveAspectRatio="none" style="width:3060px;height:2502px;background:#FFFFFF;" version="1.1" viewBox="0 0 3060 2502" width="3060px" zoomAndPan="magnify"><defs/><g><rect height="978.7773" style="stroke:#000000;stroke-width:1.5;fill:none;" width="2690.5" x="75" y="127.7988"/><rect height="947.4668" style="stroke:#000000;stroke-width:1.5;fill:none;" width="2670.5" x="85" y="152.1094"/><rect height="542.8789" style="stroke:#000000;stroke-width:1.5;fill:none;" width="2650.5" x="95" y="400.1465"/><rect height="235.4844" style="stroke:#000000;stroke-width:1.5;fill:none;" width="2429" x="306.5" y="511.0332"/><rect height="116.8867" style="stroke:#000000;stroke-width:1.5;fill:none;" width="432" x="1474" y="760.5176"/><rect height="324.7266" style="stroke:#000000;stroke-width:1.5;fill:none;" width="2970" x="10" y="1120.5762"/><rect height="630.166" style="stroke:#000000;stroke-width:1.5;fill:none;" width="2735.5" x="10" y="1459.3027"/><rect height="383.9922" style="stroke:#000000;stroke-width:1.5;fill:none;" width="2429" x="306.5" y="1584.5449"/><rect height="240.7949" style="stroke:#000000;stroke-width:1.5;fill:none;" width="3044" x="10" y="2103.4688"/><rect height="150.8633" style="stroke:#000000;stroke-width:1.5;fill:none;" width="1152.5" x="1891.5" y="2186.4004"/><rect height="46.6211" style="stroke:#000000;stroke-width:1.5;fill:none;" width="542.5" x="10" y="2358.2637"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="41" x2="41" y1="81.4883" y2="2421.8848"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="128" x2="128" y1="81.4883" y2="2421.8848"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="177" x2="177" y1="81.4883" y2="2421.8848"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="354.5" x2="354.5" y1="81.4883" y2="2421.8848"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="472.5" x2="472.5" y1="81.4883" y2="2421.8848"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="886" x2="886" y1="81.4883" y2="2421.8848"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="1500" x2="1500" y1="81.4883" y2="2421.8848"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="1924.5" x2="1924.5" y1="81.4883" y2="2421.8848"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="2705.5" x2="2705.5" y1="81.4883" y2="2421.8848"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="2948" x2="2948" y1="81.4883" y2="2421.8848"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="3014" x2="3014" y1="81.4883" y2="2421.8848"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="37" x="20" y="78.5352">Actor</text><ellipse cx="41.5" cy="13.5" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M41.5,21.5 L41.5,48.5 M28.5,29.5 L54.5,29.5 M41.5,48.5 L28.5,63.5 M41.5,48.5 L54.5,63.5 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="37" x="20" y="2434.4199">Actor</text><ellipse cx="41.5" cy="2445.873" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M41.5,2453.873 L41.5,2480.873 M28.5,2461.873 L54.5,2461.873 M41.5,2480.873 L28.5,2495.873 M41.5,2480.873 L54.5,2495.873 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="47" x="105" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="33" x="112" y="70.5352">state</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="47" x="105" y="2420.8848"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="33" x="112" y="2441.4199">state</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="30" x="162" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="16" x="169" y="70.5352">sh</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="30" x="162" y="2420.8848"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="16" x="169" y="2441.4199">sh</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="77" x="316.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63" x="323.5" y="70.5352">init/oosh</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="77" x="316.5" y="2420.8848"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63" x="323.5" y="2441.4199">init/oosh</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="139" x="403.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="125" x="410.5" y="70.5352">init/deinstall.oosh</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="139" x="403.5" y="2420.8848"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="125" x="410.5" y="2441.4199">init/deinstall.oosh</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="46" x="863" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="32" x="870" y="70.5352">ossh</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="46" x="863" y="2420.8848"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="32" x="870" y="2441.4199">ossh</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="32" x="1484" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="18" x="1491" y="70.5352">oo</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="32" x="1484" y="2420.8848"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="18" x="1491" y="2441.4199">oo</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="47" x="1901.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="33" x="1908.5" y="70.5352">bash</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="47" x="1901.5" y="2420.8848"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="33" x="1908.5" y="2441.4199">bash</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="39" x="2686.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="25" x="2693.5" y="70.5352">this</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="39" x="2686.5" y="2420.8848"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="25" x="2693.5" y="2441.4199">this</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="44" x="2926" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="30" x="2933" y="70.5352">user</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="44" x="2926" y="2420.8848"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="30" x="2933" y="2441.4199">user</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="40" x="2994" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="26" x="3001" y="70.5352">exit</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="40" x="2994" y="2420.8848"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="26" x="3001" y="2441.4199">exit</text><polygon fill="#181818" points="116.5,108.7988,126.5,112.7988,116.5,116.7988,120.5,112.7988" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="41.5" x2="122.5" y1="112.7988" y2="112.7988"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="63" x="48.5" y="108.0566">state next</text><path d="M75,127.7988 L187,127.7988 L187,135.1094 L177,145.1094 L75,145.1094 L75,127.7988 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="978.7773" style="stroke:#000000;stroke-width:1.5;" width="2690.5" x="75" y="127.7988"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="67" x="90" y="141.3672">state next</text><path d="M85,152.1094 L147,152.1094 L147,159.4199 L137,169.4199 L85,169.4199 L85,152.1094 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="947.4668" style="stroke:#000000;stroke-width:1.5;" width="2670.5" x="85" y="152.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="100" y="165.6777">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="151" x="162" y="164.7441">[state [0]    = not.installed]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="85" x2="2755.5" y1="170.4199" y2="170.4199"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="138" x="90" y="181.0547">[state [1]    = initialized]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="85" x2="2755.5" y1="185.375" y2="185.375"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="112" x="90" y="196.0098">[state [2]    = setup]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="85" x2="2755.5" y1="200.3301" y2="200.3301"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="167" x="90" y="210.9648">[state [3]    = all.states.added]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="85" x2="2755.5" y1="215.2852" y2="215.2852"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="120" x="90" y="225.9199">[state [4]    = started]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="85" x2="2755.5" y1="230.2402" y2="230.2402"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="203" x="90" y="240.875">[state [11]   = remote.install.started]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="85" x2="2755.5" y1="245.1953" y2="245.1953"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="191" x="90" y="255.8301">[state [12]   = local.install.started]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="85" x2="2755.5" y1="260.1504" y2="260.1504"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="196" x="90" y="270.7852">[state [13]   = priviledges.checked]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="85" x2="2755.5" y1="275.1055" y2="275.1055"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="172" x="90" y="285.7402">[state [20]   = user.rights.only]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="85" x2="2755.5" y1="290.0605" y2="290.0605"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="205" x="90" y="300.6953">[state [21]   = user.installation.done]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="85" x2="2755.5" y1="305.0156" y2="305.0156"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="185" x="90" y="315.6504">[state [22]   = user.mode.release]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="85" x2="2755.5" y1="319.9707" y2="319.9707"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="166" x="90" y="330.6055">[state [23]   = user.mode.dev]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="85" x2="2755.5" y1="334.9258" y2="334.9258"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="144" x="90" y="345.5605">[state [30]   = root.rights]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="85" x2="2755.5" y1="349.8809" y2="349.8809"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="251" x="90" y="360.5156">[state [31]   = root.shared.dev.folder.created]</text><polygon fill="#181818" points="1488,381.1465,1498,385.1465,1488,389.1465,1492,385.1465" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="128.5" x2="1494" y1="385.1465" y2="385.1465"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="489" x="135.5" y="380.4043">oo private.check.root.shared.dev.folder.created $script $stageTo $stateFound</text><path d="M95,400.1465 L157,400.1465 L157,407.457 L147,417.457 L95,417.457 L95,400.1465 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="542.8789" style="stroke:#000000;stroke-width:1.5;" width="2650.5" x="95" y="400.1465"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="110" y="413.7148">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="57" x="172" y="412.7813">[as a root]</text><line style="stroke:#181818;stroke-width:1.0;" x1="1500" x2="1542" y1="438.7676" y2="438.7676"/><line style="stroke:#181818;stroke-width:1.0;" x1="1542" x2="1542" y1="438.7676" y2="451.7676"/><line style="stroke:#181818;stroke-width:1.0;" x1="1501" x2="1542" y1="451.7676" y2="451.7676"/><polygon fill="#181818" points="1511,447.7676,1501,451.7676,1511,455.7676,1507,451.7676" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="411" x="1507" y="434.0254">return to oo private.check.root.shared.dev.folder.created AS USER</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="95" x2="2745.5" y1="460.7676" y2="460.7676"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="48" x="100" y="471.4023">[as user]</text><polygon fill="#181818" points="366,492.0332,356,496.0332,366,500.0332,362,496.0332" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="360" x2="1499" y1="496.0332" y2="496.0332"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="475" x="372" y="491.291">sudo /oosh/init/oosh mode user user.$USER localhost dev # switch to root</text><path d="M306.5,511.0332 L525.5,511.0332 L525.5,518.3438 L515.5,528.3438 L306.5,528.3438 L306.5,511.0332 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="235.4844" style="stroke:#000000;stroke-width:1.5;" width="2429" x="306.5" y="511.0332"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="174" x="321.5" y="524.6016">Install as root from $USER</text><polygon fill="#181818" points="1913,545.6543,1923,549.6543,1913,553.6543,1917,549.6543" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="355" x2="1919" y1="549.6543" y2="549.6543"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="957" x="362" y="544.9121">"$BASH_FILE" -xc "$OOSH_DIR/this call ossh install.continue.local $SSH_CONFIG_FROM_REMOTE $SSH_CONFIG_NAME_USED_FOR_LOCAL $DEV_MODE"</text><polygon fill="#181818" points="2694,574.9648,2704,578.9648,2694,582.9648,2698,578.9648" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1925" x2="2700" y1="578.9648" y2="578.9648"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="757" x="1932" y="574.2227">this call ossh install.continue.local $SSH_CONFIG_FROM_REMOTE $SSH_CONFIG_NAME_USED_FOR_LOCAL $DEV_MODE"</text><polygon fill="#181818" points="897,604.2754,887,608.2754,897,612.2754,893,608.2754" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="891" x2="2705" y1="608.2754" y2="608.2754"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="703" x="903" y="603.5332">ossh install.continue.local $SSH_CONFIG_FROM_REMOTE $SSH_CONFIG_NAME_USED_FOR_LOCAL $DEV_MODE"</text><line style="stroke:#181818;stroke-width:1.0;" x1="886" x2="928" y1="637.5859" y2="637.5859"/><line style="stroke:#181818;stroke-width:1.0;" x1="928" x2="928" y1="637.5859" y2="650.5859"/><line style="stroke:#181818;stroke-width:1.0;" x1="887" x2="928" y1="650.5859" y2="650.5859"/><polygon fill="#181818" points="897,646.5859,887,650.5859,897,654.5859,893,650.5859" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="893" y="632.8438">fix user config</text><polygon fill="#181818" points="2694,675.8965,2704,679.8965,2694,683.8965,2698,679.8965" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="886" x2="2700" y1="679.8965" y2="679.8965"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="893" y="675.1543">return 0</text><polygon fill="#181818" points="1936,705.207,1926,709.207,1936,713.207,1932,709.207" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1930" x2="2705" y1="709.207" y2="709.207"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="1942" y="704.4648">return 0</text><polygon fill="#181818" points="366,734.5176,356,738.5176,366,742.5176,362,738.5176" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="360" x2="1924" y1="738.5176" y2="738.5176"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="372" y="733.7754">return 0</text><path d="M1474,760.5176 L1536,760.5176 L1536,767.8281 L1526,777.8281 L1474,777.8281 L1474,760.5176 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="116.8867" style="stroke:#000000;stroke-width:1.5;" width="432" x="1474" y="760.5176"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="1489" y="774.0859">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="205" x="1551" y="773.1523">[successful root installation as user]</text><line style="stroke:#181818;stroke-width:1.0;" x1="1500" x2="1542" y1="799.1387" y2="799.1387"/><line style="stroke:#181818;stroke-width:1.0;" x1="1542" x2="1542" y1="799.1387" y2="812.1387"/><line style="stroke:#181818;stroke-width:1.0;" x1="1501" x2="1542" y1="812.1387" y2="812.1387"/><polygon fill="#181818" points="1511,808.1387,1501,812.1387,1511,816.1387,1507,812.1387" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="357" x="1507" y="794.3965">oo private.check.root.shared.dev.folder.created as a user</text><line style="stroke:#181818;stroke-width:1.0;" x1="1500" x2="1542" y1="841.4492" y2="841.4492"/><line style="stroke:#181818;stroke-width:1.0;" x1="1542" x2="1542" y1="841.4492" y2="854.4492"/><line style="stroke:#181818;stroke-width:1.0;" x1="1501" x2="1542" y1="854.4492" y2="854.4492"/><polygon fill="#181818" points="1511,850.4492,1501,854.4492,1511,858.4492,1507,854.4492" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="245" x="1507" y="836.707">link users directories to /home/shared</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1474" x2="1906" y1="863.4492" y2="863.4492"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="427" x="1479" y="874.084">[error.log "could not install root as user $USER: $(errno $RETURN_VALUE)"]</text><polygon fill="#181818" points="1488,901.7148,1498,905.7148,1488,909.7148,1492,905.7148" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="355" x2="1494" y1="905.7148" y2="905.7148"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="362" y="900.9727">return 0</text><polygon fill="#181818" points="139.5,931.0254,129.5,935.0254,139.5,939.0254,135.5,935.0254" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="133.5" x2="1499" y1="935.0254" y2="935.0254"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="217" x="145.5" y="930.2832">return 0; "installed root form user"</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="85" x2="2755.5" y1="951.0254" y2="951.0254"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="180" x="90" y="961.6602">[[32]   = root.dev.keys.installed]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="85" x2="2755.5" y1="965.9805" y2="965.9805"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="174" x="90" y="976.6152">[[33]   = root.installation.done]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="85" x2="2755.5" y1="980.9355" y2="980.9355"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="217" x="90" y="991.5703">[[40]   = user.shared.dev.folder.linked]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="85" x2="2755.5" y1="995.8906" y2="995.8906"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="252" x="90" y="1006.5254">[[41]   = user.state.machine.synced.with.root]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="85" x2="2755.5" y1="1010.8457" y2="1010.8457"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="177" x="90" y="1021.4805">[[50]   = headless.setup.started]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="85" x2="2755.5" y1="1025.8008" y2="1025.8008"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="185" x="90" y="1036.4355">[[51]   = headless.setup.finished]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="85" x2="2755.5" y1="1040.7559" y2="1040.7559"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="155" x="90" y="1051.3906">[[60]   = once.setup.started]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="85" x2="2755.5" y1="1055.7109" y2="1055.7109"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="163" x="90" y="1066.3457">[[61]   = once.setup.finished]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="85" x2="2755.5" y1="1070.666" y2="1070.666"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="101" x="90" y="1081.3008">[[99]   = finished]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="85" x2="2755.5" y1="1085.6211" y2="1085.6211"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="122" x="90" y="1096.2559">[[6]    = to.be.deleted]</text><path d="M10,1120.5762 L169,1120.5762 L169,1127.8867 L159,1137.8867 L10,1137.8867 L10,1120.5762 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="324.7266" style="stroke:#000000;stroke-width:1.5;" width="2970" x="10" y="1120.5762"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="114" x="25" y="1134.1445">Local Installation</text><polygon fill="#181818" points="343,1155.1973,353,1159.1973,343,1163.1973,347,1159.1973" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="41.5" x2="349" y1="1159.1973" y2="1159.1973"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59" x="48.5" y="1154.4551">init/oosh</text><polygon fill="#181818" points="188,1184.5078,178,1188.5078,188,1192.5078,184,1188.5078" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="182" x2="354" y1="1188.5078" y2="1188.5078"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="12" x="194" y="1183.7656">1.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138" x="210" y="1183.7656">!/bin/sh ### shebang</text><polygon fill="#181818" points="1913,1213.8184,1923,1217.8184,1913,1221.8184,1917,1217.8184" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="177" x2="1919" y1="1217.8184" y2="1217.8184"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131" x="184" y="1213.0762">bash this localInstall</text><polygon fill="#181818" points="2694,1243.1289,2704,1247.1289,2694,1251.1289,2698,1247.1289" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1925" x2="2700" y1="1247.1289" y2="1247.1289"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97" x="1932" y="1242.3867">this localInstall</text><polygon fill="#181818" points="1936,1272.4395,1926,1276.4395,1936,1280.4395,1932,1276.4395" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1930" x2="2705" y1="1276.4395" y2="1276.4395"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="12" x="1942" y="1271.6973">1.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="206" x="1958" y="1271.6973">!/usr/bin/env bash ### shebang</text><polygon fill="#181818" points="1511,1301.75,1501,1305.75,1511,1309.75,1507,1305.75" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1505" x2="2705" y1="1305.75" y2="1305.75"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="244" x="1517" y="1301.0078">oo state # initializes the state machine</text><polygon fill="#181818" points="2936,1346.3711,2946,1350.3711,2936,1354.3711,2940,1350.3711" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="2706" x2="2942" y1="1350.3711" y2="1350.3711"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="90" x="2713" y="1330.3184">user get home</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="214" x="2717" y="1345.6289"># hack to make sure the pm is set</text><polygon fill="#181818" points="1936,1375.6816,1926,1379.6816,1936,1383.6816,1932,1379.6816" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1930" x2="2705" y1="1379.6816" y2="1379.6816"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99" x="1942" y="1374.9395">starts new bash</text><line style="stroke:#181818;stroke-width:1.0;" x1="1925" x2="1967" y1="1424.3027" y2="1424.3027"/><line style="stroke:#181818;stroke-width:1.0;" x1="1967" x2="1967" y1="1424.3027" y2="1437.3027"/><line style="stroke:#181818;stroke-width:1.0;" x1="1926" x2="1967" y1="1437.3027" y2="1437.3027"/><polygon fill="#181818" points="1936,1433.3027,1926,1437.3027,1936,1441.3027,1932,1437.3027" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="1932" y="1404.25">source .bashrc</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="204" x="1936" y="1419.5605">[oosh sshConfig] has started &gt; |</text><path d="M10,1459.3027 L185,1459.3027 L185,1466.6133 L175,1476.6133 L10,1476.6133 L10,1459.3027 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="630.166" style="stroke:#000000;stroke-width:1.5;" width="2735.5" x="10" y="1459.3027"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="130" x="25" y="1472.8711">Remote Installation</text><polygon fill="#181818" points="874,1493.9238,884,1497.9238,874,1501.9238,878,1497.9238" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="41.5" x2="880" y1="1497.9238" y2="1497.9238"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="205" x="48.5" y="1493.1816">ossh install &lt;remoteSSHconfig&gt;</text><line style="stroke:#181818;stroke-width:1.0;" x1="886" x2="928" y1="1527.2344" y2="1527.2344"/><line style="stroke:#181818;stroke-width:1.0;" x1="928" x2="928" y1="1527.2344" y2="1540.2344"/><line style="stroke:#181818;stroke-width:1.0;" x1="887" x2="928" y1="1540.2344" y2="1540.2344"/><polygon fill="#181818" points="897,1536.2344,887,1540.2344,897,1544.2344,893,1540.2344" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113" x="893" y="1522.4922">private.push.oosh</text><polygon fill="#181818" points="366,1565.5449,356,1569.5449,366,1573.5449,362,1569.5449" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="360" x2="885" y1="1569.5449" y2="1569.5449"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="507" x="372" y="1564.8027">init/oosh mode ssh &lt;remoteSSHconfig&gt; &lt;localSSHconfig&gt; &lt;localOSSH_MODE&gt;</text><path d="M306.5,1584.5449 L368.5,1584.5449 L368.5,1591.8555 L358.5,1601.8555 L306.5,1601.8555 L306.5,1584.5449 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="383.9922" style="stroke:#000000;stroke-width:1.5;" width="2429" x="306.5" y="1584.5449"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="321.5" y="1598.1133">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="62" x="383.5" y="1597.1797">[mode ssh]</text><polygon fill="#181818" points="1913,1619.166,1923,1623.166,1913,1627.166,1917,1623.166" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="355" x2="1919" y1="1623.166" y2="1623.166"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="957" x="362" y="1618.4238">"$BASH_FILE" -xc "$OOSH_DIR/this call ossh install.continue.local $SSH_CONFIG_FROM_REMOTE $SSH_CONFIG_NAME_USED_FOR_LOCAL $DEV_MODE"</text><polygon fill="#181818" points="2694,1648.4766,2704,1652.4766,2694,1656.4766,2698,1652.4766" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1925" x2="2700" y1="1652.4766" y2="1652.4766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="757" x="1932" y="1647.7344">this call ossh install.continue.local $SSH_CONFIG_FROM_REMOTE $SSH_CONFIG_NAME_USED_FOR_LOCAL $DEV_MODE"</text><polygon fill="#181818" points="897,1677.7871,887,1681.7871,897,1685.7871,893,1681.7871" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="891" x2="2705" y1="1681.7871" y2="1681.7871"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="703" x="903" y="1677.0449">ossh install.continue.local $SSH_CONFIG_FROM_REMOTE $SSH_CONFIG_NAME_USED_FOR_LOCAL $DEV_MODE"</text><polygon fill="#181818" points="2694,1707.0977,2704,1711.0977,2694,1715.0977,2698,1711.0977" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="886" x2="2700" y1="1711.0977" y2="1711.0977"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="893" y="1706.3555">return 0</text><polygon fill="#181818" points="1936,1736.4082,1926,1740.4082,1936,1744.4082,1932,1740.4082" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1930" x2="2705" y1="1740.4082" y2="1740.4082"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="1942" y="1735.666">return 0</text><polygon fill="#181818" points="366,1765.7188,356,1769.7188,366,1773.7188,362,1769.7188" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="360" x2="1924" y1="1769.7188" y2="1769.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="372" y="1764.9766">return 0</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="306.5" x2="2735.5" y1="1778.7188" y2="1778.7188"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="67" x="311.5" y="1789.3535">[mode user]</text><polygon fill="#181818" points="1913,1809.9844,1923,1813.9844,1913,1817.9844,1917,1813.9844" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="355" x2="1919" y1="1813.9844" y2="1813.9844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="957" x="362" y="1809.2422">"$BASH_FILE" -xc "$OOSH_DIR/this call ossh install.continue.local $SSH_CONFIG_FROM_REMOTE $SSH_CONFIG_NAME_USED_FOR_LOCAL $DEV_MODE"</text><polygon fill="#181818" points="2694,1839.2949,2704,1843.2949,2694,1847.2949,2698,1843.2949" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1925" x2="2700" y1="1843.2949" y2="1843.2949"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="757" x="1932" y="1838.5527">this call ossh install.continue.local $SSH_CONFIG_FROM_REMOTE $SSH_CONFIG_NAME_USED_FOR_LOCAL $DEV_MODE"</text><polygon fill="#181818" points="897,1868.6055,887,1872.6055,897,1876.6055,893,1872.6055" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="891" x2="2705" y1="1872.6055" y2="1872.6055"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="703" x="903" y="1867.8633">ossh install.continue.local $SSH_CONFIG_FROM_REMOTE $SSH_CONFIG_NAME_USED_FOR_LOCAL $DEV_MODE"</text><polygon fill="#181818" points="2694,1897.916,2704,1901.916,2694,1905.916,2698,1901.916" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="886" x2="2700" y1="1901.916" y2="1901.916"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="893" y="1897.1738">return 0</text><polygon fill="#181818" points="1936,1927.2266,1926,1931.2266,1936,1935.2266,1932,1931.2266" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1930" x2="2705" y1="1931.2266" y2="1931.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="1942" y="1926.4844">return 0</text><polygon fill="#181818" points="366,1956.5371,356,1960.5371,366,1964.5371,362,1960.5371" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="360" x2="1924" y1="1960.5371" y2="1960.5371"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="372" y="1955.7949">return 0</text><polygon fill="#181818" points="874,1992.8477,884,1996.8477,874,2000.8477,878,1996.8477" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="355" x2="880" y1="1996.8477" y2="1996.8477"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="362" y="1992.1055">return 0</text><line style="stroke:#181818;stroke-width:1.0;" x1="886" x2="928" y1="2026.1582" y2="2026.1582"/><line style="stroke:#181818;stroke-width:1.0;" x1="928" x2="928" y1="2026.1582" y2="2039.1582"/><line style="stroke:#181818;stroke-width:1.0;" x1="887" x2="928" y1="2039.1582" y2="2039.1582"/><polygon fill="#181818" points="897,2035.1582,887,2039.1582,897,2043.1582,893,2039.1582" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="600" x="893" y="2021.416">ssh $sshConfigHost "bash /home/$user/oosh/ossh continue.local.install from $(ossh.get.url)"</text><line style="stroke:#181818;stroke-width:1.0;" x1="886" x2="928" y1="2068.4688" y2="2068.4688"/><line style="stroke:#181818;stroke-width:1.0;" x1="928" x2="928" y1="2068.4688" y2="2081.4688"/><line style="stroke:#181818;stroke-width:1.0;" x1="887" x2="928" y1="2081.4688" y2="2081.4688"/><polygon fill="#181818" points="897,2077.4688,887,2081.4688,897,2085.4688,893,2081.4688" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="279" x="893" y="2063.7266">ossh.install.finish.local &lt;remoteSSHconfig&gt;</text><path d="M10,2103.4688 L275,2103.4688 L275,2110.7793 L265,2120.7793 L10,2120.7793 L10,2103.4688 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="240.7949" style="stroke:#000000;stroke-width:1.5;" width="3044" x="10" y="2103.4688"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="220" x="25" y="2117.0371">Reconfiguration and Exit of oosh</text><polygon fill="#181818" points="3002,2138.0898,3012,2142.0898,3002,2146.0898,3006,2142.0898" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="41.5" x2="3008" y1="2142.0898" y2="2142.0898"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="270" x="48.5" y="2137.3477">exit $ERROR_CODE_RECONFIG(defualt is 7)</text><polygon fill="#181818" points="2717,2167.4004,2707,2171.4004,2717,2175.4004,2713,2171.4004" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="2711" x2="3013" y1="2171.4004" y2="2171.4004"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="69" x="2723" y="2166.6582">this.restart</text><path d="M1891.5,2186.4004 L1953.5,2186.4004 L1953.5,2193.7109 L1943.5,2203.7109 L1891.5,2203.7109 L1891.5,2186.4004 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="150.8633" style="stroke:#000000;stroke-width:1.5;" width="1152.5" x="1891.5" y="2186.4004"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="1906.5" y="2199.9688">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="272" x="1968.5" y="2199.0352">[$RETURN_VALUE = $ERROR_CODE_RECONFIG]</text><line style="stroke:#181818;stroke-width:1.0;" x1="2706" x2="2748" y1="2240.332" y2="2240.332"/><line style="stroke:#181818;stroke-width:1.0;" x1="2748" x2="2748" y1="2240.332" y2="2253.332"/><line style="stroke:#181818;stroke-width:1.0;" x1="2707" x2="2748" y1="2253.332" y2="2253.332"/><polygon fill="#181818" points="2717,2249.332,2707,2253.332,2717,2257.332,2713,2253.332" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107" x="2713" y="2220.2793">this.restart again</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="154" x="2717" y="2235.5898"># exited back into this 7</text><polygon fill="#181818" points="1936,2293.9531,1926,2297.9531,1936,2301.9531,1932,2297.9531" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1930" x2="2705" y1="2297.9531" y2="2297.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="1942" y="2277.9004">source .bashrc</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="288" x="1946" y="2293.2109">[oosh sshConfig] has started reconfigured &gt; |</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1891.5" x2="3044" y1="2306.9531" y2="2306.9531"/><polygon fill="#181818" points="3002,2325.2637,3012,2329.2637,3002,2333.2637,3006,2329.2637" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="2706" x2="3008" y1="2329.2637" y2="2329.2637"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="284" x="2713" y="2324.5215">finally exiting oosh (in this.start case restart)</text><path d="M10,2358.2637 L195,2358.2637 L195,2365.5742 L185,2375.5742 L10,2375.5742 L10,2358.2637 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="46.6211" style="stroke:#000000;stroke-width:1.5;" width="542.5" x="10" y="2358.2637"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="140" x="25" y="2371.832">Local De-Installation</text><polygon fill="#181818" points="461,2392.8848,471,2396.8848,461,2400.8848,465,2396.8848" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="41.5" x2="467" y1="2396.8848" y2="2396.8848"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="48.5" y="2392.1426">init/deinstall.oosh</text><!--MD5=[18fcd556d00bb273516ce1e5079b4e34]
@startuml
actor Actor as a
participant state
participant sh
participant "init/oosh" as oosh 
participant "init/deinstall.oosh" as deinstall.oosh 
participant ossh
participant oo
participant bash
participant this

a -> state: state next
group state next
    alt state [0]    = not.installed
    else state [1]    = initialized
    else state [2]    = setup
    else state [3]    = all.states.added
    else state [4]    = started
    else state [11]   = remote.install.started
    else state [12]   = local.install.started
    else state [13]   = priviledges.checked
    else state [20]   = user.rights.only
    else state [21]   = user.installation.done
    else state [22]   = user.mode.release
    else state [23]   = user.mode.dev
    else state [30]   = root.rights
    else state [31]   = root.shared.dev.folder.created
        state -> oo: oo private.check.root.shared.dev.folder.created $script $stageTo $stateFound
        alt as a root
            oo -> oo: return to oo private.check.root.shared.dev.folder.created AS USER
        else as user
            oo -> oosh: sudo ~/oosh/init/oosh mode user user.$USER localhost dev # switch to root
            group Install as root from $USER
                    oosh -> bash: "$BASH_FILE" -xc "$OOSH_DIR/this call ossh install.continue.local $SSH_CONFIG_FROM_REMOTE $SSH_CONFIG_NAME_USED_FOR_LOCAL $DEV_MODE"
                    bash -> this: this call ossh install.continue.local $SSH_CONFIG_FROM_REMOTE $SSH_CONFIG_NAME_USED_FOR_LOCAL $DEV_MODE"
                    this -> ossh: ossh install.continue.local $SSH_CONFIG_FROM_REMOTE $SSH_CONFIG_NAME_USED_FOR_LOCAL $DEV_MODE"
                    ossh -> ossh: fix user config
                    ossh -> this: return 0
                    this -> bash: return 0
                    bash -> oosh: return 0
            end
            alt successful root installation as user 
                oo -> oo: oo private.check.root.shared.dev.folder.created as a user
                oo -> oo: link users directories to /home/shared 
            else error.log "could not install root as user $USER: $(errno $RETURN_VALUE)"
            end
            oosh -> oo: return 0
            oo -> state: return 0; "installed root form user"
        end
    else [32]   = root.dev.keys.installed
    else [33]   = root.installation.done
    else [40]   = user.shared.dev.folder.linked
    else [41]   = user.state.machine.synced.with.root
    else [50]   = headless.setup.started
    else [51]   = headless.setup.finished
    else [60]   = once.setup.started
    else [61]   = once.setup.finished
    else [99]   = finished
    else [6]    = to.be.deleted
    end
end

group Local Installation
    a -> oosh: init/oosh
    oosh -> sh: #!/bin/sh ### shebang
    sh -> bash: bash this localInstall
    bash -> this: this localInstall
    this -> bash: #!/usr/bin/env bash ### shebang
    this -> oo: oo state # initializes the state machine
    this -> user: user get home \n # hack to make sure the pm is set
    this -> bash: starts new bash
    bash -> bash: source .bashrc \n [oosh sshConfig] has started > |
end
group Remote Installation

    a -> ossh: ossh install <remoteSSHconfig> 

    ossh -> ossh: private.push.oosh
    ossh -> oosh: init/oosh mode ssh <remoteSSHconfig> <localSSHconfig> <localOSSH_MODE>
    alt mode ssh
        oosh -> bash: "$BASH_FILE" -xc "$OOSH_DIR/this call ossh install.continue.local $SSH_CONFIG_FROM_REMOTE $SSH_CONFIG_NAME_USED_FOR_LOCAL $DEV_MODE"
        bash -> this: this call ossh install.continue.local $SSH_CONFIG_FROM_REMOTE $SSH_CONFIG_NAME_USED_FOR_LOCAL $DEV_MODE"
        this -> ossh: ossh install.continue.local $SSH_CONFIG_FROM_REMOTE $SSH_CONFIG_NAME_USED_FOR_LOCAL $DEV_MODE"
        ossh -> this: return 0
        this -> bash: return 0
        bash -> oosh: return 0
    else mode user
        oosh -> bash: "$BASH_FILE" -xc "$OOSH_DIR/this call ossh install.continue.local $SSH_CONFIG_FROM_REMOTE $SSH_CONFIG_NAME_USED_FOR_LOCAL $DEV_MODE"
        bash -> this: this call ossh install.continue.local $SSH_CONFIG_FROM_REMOTE $SSH_CONFIG_NAME_USED_FOR_LOCAL $DEV_MODE"
        this -> ossh: ossh install.continue.local $SSH_CONFIG_FROM_REMOTE $SSH_CONFIG_NAME_USED_FOR_LOCAL $DEV_MODE"
        ossh -> this: return 0
        this -> bash: return 0
        bash -> oosh: return 0
    end
    oosh -> ossh: return 0
    
    ossh -> ossh: ssh $sshConfigHost "bash /home/$user/oosh/ossh continue.local.install from $(ossh.get.url)"
    ossh -> ossh: ossh.install.finish.local <remoteSSHconfig>
end
group Reconfiguration and Exit of oosh
    a -> exit: exit $ERROR_CODE_RECONFIG(defualt is 7)
    exit -> this: this.restart
    alt $RETURN_VALUE = $ERROR_CODE_RECONFIG
        this -> this: this.restart again \n # exited back into this 7
        this -> bash: source .bashrc \n [oosh sshConfig] has started reconfigured > |
    else
        this -> exit: finally exiting oosh (in this.start case restart)
    end
end
group Local De-Installation
    a -> deinstall.oosh: init/deinstall.oosh
end
@enduml

PlantUML version 1.2022.5(Sat Apr 30 12:55:52 CEST 2022)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: GB
--></g></svg>