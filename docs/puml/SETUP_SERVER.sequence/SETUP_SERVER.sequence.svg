<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="2271px" preserveAspectRatio="none" style="width:2684px;height:2271px;background:#FFFFFF;" version="1.1" viewBox="0 0 2684 2271" width="2684px" zoomAndPan="magnify"><defs/><g><rect height="746.9141" style="stroke:#000000;stroke-width:1.5;fill:none;" width="2305" x="75" y="127.7988"/><rect height="715.6035" style="stroke:#000000;stroke-width:1.5;fill:none;" width="2285" x="85" y="152.1094"/><rect height="296.0605" style="stroke:#000000;stroke-width:1.5;fill:none;" width="2265" x="95" y="415.1016"/><rect height="324.7266" style="stroke:#000000;stroke-width:1.5;fill:none;" width="2594.5" x="10" y="888.7129"/><rect height="630.166" style="stroke:#000000;stroke-width:1.5;fill:none;" width="2360" x="10" y="1227.4395"/><rect height="383.9922" style="stroke:#000000;stroke-width:1.5;fill:none;" width="2053.5" x="306.5" y="1352.6816"/><rect height="240.7949" style="stroke:#000000;stroke-width:1.5;fill:none;" width="2668.5" x="10" y="1871.6055"/><rect height="150.8633" style="stroke:#000000;stroke-width:1.5;fill:none;" width="1152.5" x="1516" y="1954.5371"/><rect height="46.6211" style="stroke:#000000;stroke-width:1.5;fill:none;" width="542.5" x="10" y="2126.4004"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="41" x2="41" y1="81.4883" y2="2190.0215"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="128" x2="128" y1="81.4883" y2="2190.0215"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="177" x2="177" y1="81.4883" y2="2190.0215"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="354.5" x2="354.5" y1="81.4883" y2="2190.0215"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="472.5" x2="472.5" y1="81.4883" y2="2190.0215"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="886" x2="886" y1="81.4883" y2="2190.0215"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="1500" x2="1500" y1="81.4883" y2="2190.0215"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="1549" x2="1549" y1="81.4883" y2="2190.0215"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="2330" x2="2330" y1="81.4883" y2="2190.0215"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="2572.5" x2="2572.5" y1="81.4883" y2="2190.0215"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="2638.5" x2="2638.5" y1="81.4883" y2="2190.0215"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="37" x="20" y="78.5352">Actor</text><ellipse cx="41.5" cy="13.5" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M41.5,21.5 L41.5,48.5 M28.5,29.5 L54.5,29.5 M41.5,48.5 L28.5,63.5 M41.5,48.5 L54.5,63.5 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="37" x="20" y="2202.5566">Actor</text><ellipse cx="41.5" cy="2214.0098" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M41.5,2222.0098 L41.5,2249.0098 M28.5,2230.0098 L54.5,2230.0098 M41.5,2249.0098 L28.5,2264.0098 M41.5,2249.0098 L54.5,2264.0098 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="47" x="105" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="33" x="112" y="70.5352">state</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="47" x="105" y="2189.0215"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="33" x="112" y="2209.5566">state</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="30" x="162" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="16" x="169" y="70.5352">sh</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="30" x="162" y="2189.0215"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="16" x="169" y="2209.5566">sh</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="77" x="316.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63" x="323.5" y="70.5352">init/oosh</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="77" x="316.5" y="2189.0215"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63" x="323.5" y="2209.5566">init/oosh</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="139" x="403.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="125" x="410.5" y="70.5352">init/deinstall.oosh</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="139" x="403.5" y="2189.0215"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="125" x="410.5" y="2209.5566">init/deinstall.oosh</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="46" x="863" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="32" x="870" y="70.5352">ossh</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="46" x="863" y="2189.0215"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="32" x="870" y="2209.5566">ossh</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="32" x="1484" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="18" x="1491" y="70.5352">oo</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="32" x="1484" y="2189.0215"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="18" x="1491" y="2209.5566">oo</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="47" x="1526" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="33" x="1533" y="70.5352">bash</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="47" x="1526" y="2189.0215"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="33" x="1533" y="2209.5566">bash</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="39" x="2311" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="25" x="2318" y="70.5352">this</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="39" x="2311" y="2189.0215"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="25" x="2318" y="2209.5566">this</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="44" x="2550.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="30" x="2557.5" y="70.5352">user</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="44" x="2550.5" y="2189.0215"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="30" x="2557.5" y="2209.5566">user</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="40" x="2618.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="26" x="2625.5" y="70.5352">exit</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="40" x="2618.5" y="2189.0215"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="26" x="2625.5" y="2209.5566">exit</text><polygon fill="#181818" points="116.5,108.7988,126.5,112.7988,116.5,116.7988,120.5,112.7988" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="41.5" x2="122.5" y1="112.7988" y2="112.7988"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="63" x="48.5" y="108.0566">state next</text><path d="M75,127.7988 L187,127.7988 L187,135.1094 L177,145.1094 L75,145.1094 L75,127.7988 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="746.9141" style="stroke:#000000;stroke-width:1.5;" width="2305" x="75" y="127.7988"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="67" x="90" y="141.3672">state next</text><path d="M85,152.1094 L147,152.1094 L147,159.4199 L137,169.4199 L85,169.4199 L85,152.1094 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="715.6035" style="stroke:#000000;stroke-width:1.5;" width="2285" x="85" y="152.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="100" y="165.6777">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="30" x="162" y="164.7441">[curl]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="85" x2="2370" y1="170.4199" y2="170.4199"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="121" x="90" y="181.0547">[[0]    = not.installed]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="85" x2="2370" y1="185.375" y2="185.375"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="108" x="90" y="196.0098">[[1]    = initialized]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="85" x2="2370" y1="200.3301" y2="200.3301"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="82" x="90" y="210.9648">[[2]    = setup]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="85" x2="2370" y1="215.2852" y2="215.2852"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="137" x="90" y="225.9199">[[3]    = all.states.added]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="85" x2="2370" y1="230.2402" y2="230.2402"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="90" x="90" y="240.875">[[4]    = started]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="85" x2="2370" y1="245.1953" y2="245.1953"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="173" x="90" y="255.8301">[[11]   = remote.install.started]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="85" x2="2370" y1="260.1504" y2="260.1504"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="161" x="90" y="270.7852">[[12]   = local.install.started]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="85" x2="2370" y1="275.1055" y2="275.1055"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="166" x="90" y="285.7402">[[13]   = priviledges.checked]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="85" x2="2370" y1="290.0605" y2="290.0605"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="142" x="90" y="300.6953">[[20]   = user.rights.only]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="85" x2="2370" y1="305.0156" y2="305.0156"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="175" x="90" y="315.6504">[[21]   = user.installation.done]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="85" x2="2370" y1="319.9707" y2="319.9707"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="155" x="90" y="330.6055">[[22]   = user.mode.release]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="85" x2="2370" y1="334.9258" y2="334.9258"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="136" x="90" y="345.5605">[[23]   = user.mode.dev]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="85" x2="2370" y1="349.8809" y2="349.8809"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="114" x="90" y="360.5156">[[30]   = root.rights]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="85" x2="2370" y1="364.8359" y2="364.8359"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="221" x="90" y="375.4707">[[31]   = root.shared.dev.folder.created]</text><polygon fill="#181818" points="1488,396.1016,1498,400.1016,1488,404.1016,1492,400.1016" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="128.5" x2="1494" y1="400.1016" y2="400.1016"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="489" x="135.5" y="395.3594">oo private.check.root.shared.dev.folder.created $script $stageTo $stateFound</text><path d="M95,415.1016 L157,415.1016 L157,422.4121 L147,432.4121 L95,432.4121 L95,415.1016 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="296.0605" style="stroke:#000000;stroke-width:1.5;" width="2265" x="95" y="415.1016"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="110" y="428.6699">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="58" x="172" y="427.7363">[as a user]</text><polygon fill="#181818" points="366,449.7227,356,453.7227,366,457.7227,362,453.7227" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="360" x2="1499" y1="453.7227" y2="453.7227"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="371" x="372" y="448.9805">sudo /oosh/init/oosh mode user user.$USER localhost dev</text><polygon fill="#181818" points="1537.5,479.0332,1547.5,483.0332,1537.5,487.0332,1541.5,483.0332" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="355" x2="1543.5" y1="483.0332" y2="483.0332"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="957" x="362" y="478.291">"$BASH_FILE" -xc "$OOSH_DIR/this call ossh install.continue.local $SSH_CONFIG_FROM_REMOTE $SSH_CONFIG_NAME_USED_FOR_LOCAL $DEV_MODE"</text><polygon fill="#181818" points="2318.5,508.3438,2328.5,512.3438,2318.5,516.3438,2322.5,512.3438" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1549.5" x2="2324.5" y1="512.3438" y2="512.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="757" x="1556.5" y="507.6016">this call ossh install.continue.local $SSH_CONFIG_FROM_REMOTE $SSH_CONFIG_NAME_USED_FOR_LOCAL $DEV_MODE"</text><polygon fill="#181818" points="897,537.6543,887,541.6543,897,545.6543,893,541.6543" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="891" x2="2329.5" y1="541.6543" y2="541.6543"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="703" x="903" y="536.9121">ossh install.continue.local $SSH_CONFIG_FROM_REMOTE $SSH_CONFIG_NAME_USED_FOR_LOCAL $DEV_MODE"</text><polygon fill="#181818" points="2318.5,566.9648,2328.5,570.9648,2318.5,574.9648,2322.5,570.9648" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="886" x2="2324.5" y1="570.9648" y2="570.9648"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="893" y="566.2227">return 0</text><polygon fill="#181818" points="1560.5,596.2754,1550.5,600.2754,1560.5,604.2754,1556.5,600.2754" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1554.5" x2="2329.5" y1="600.2754" y2="600.2754"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="1566.5" y="595.5332">return 0</text><polygon fill="#181818" points="366,625.5859,356,629.5859,366,633.5859,362,629.5859" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="360" x2="1548.5" y1="629.5859" y2="629.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="372" y="624.8438">return 0</text><polygon fill="#181818" points="1488,654.8965,1498,658.8965,1488,662.8965,1492,658.8965" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="355" x2="1494" y1="658.8965" y2="658.8965"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="362" y="654.1543">return 0</text><polygon fill="#181818" points="139.5,684.207,129.5,688.207,139.5,692.207,135.5,688.207" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="133.5" x2="1499" y1="688.207" y2="688.207"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106" x="145.5" y="683.4648">return 2 WORNG!</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="95" x2="2360" y1="697.207" y2="697.207"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="47" x="100" y="707.8418">[as root]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="85" x2="2370" y1="719.1621" y2="719.1621"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="180" x="90" y="729.7969">[[32]   = root.dev.keys.installed]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="85" x2="2370" y1="734.1172" y2="734.1172"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="174" x="90" y="744.752">[[33]   = root.installation.done]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="85" x2="2370" y1="749.0723" y2="749.0723"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="217" x="90" y="759.707">[[40]   = user.shared.dev.folder.linked]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="85" x2="2370" y1="764.0273" y2="764.0273"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="252" x="90" y="774.6621">[[41]   = user.state.machine.synced.with.root]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="85" x2="2370" y1="778.9824" y2="778.9824"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="177" x="90" y="789.6172">[[50]   = headless.setup.started]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="85" x2="2370" y1="793.9375" y2="793.9375"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="185" x="90" y="804.5723">[[51]   = headless.setup.finished]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="85" x2="2370" y1="808.8926" y2="808.8926"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="155" x="90" y="819.5273">[[60]   = once.setup.started]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="85" x2="2370" y1="823.8477" y2="823.8477"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="163" x="90" y="834.4824">[[61]   = once.setup.finished]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="85" x2="2370" y1="838.8027" y2="838.8027"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="101" x="90" y="849.4375">[[99]   = finished]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="85" x2="2370" y1="853.7578" y2="853.7578"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="122" x="90" y="864.3926">[[6]    = to.be.deleted]</text><path d="M10,888.7129 L169,888.7129 L169,896.0234 L159,906.0234 L10,906.0234 L10,888.7129 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="324.7266" style="stroke:#000000;stroke-width:1.5;" width="2594.5" x="10" y="888.7129"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="114" x="25" y="902.2813">Local Installation</text><polygon fill="#181818" points="343,923.334,353,927.334,343,931.334,347,927.334" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="41.5" x2="349" y1="927.334" y2="927.334"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59" x="48.5" y="922.5918">init/oosh</text><polygon fill="#181818" points="188,952.6445,178,956.6445,188,960.6445,184,956.6445" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="182" x2="354" y1="956.6445" y2="956.6445"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="12" x="194" y="951.9023">1.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138" x="210" y="951.9023">!/bin/sh ### shebang</text><polygon fill="#181818" points="1537.5,981.9551,1547.5,985.9551,1537.5,989.9551,1541.5,985.9551" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="177" x2="1543.5" y1="985.9551" y2="985.9551"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131" x="184" y="981.2129">bash this localInstall</text><polygon fill="#181818" points="2318.5,1011.2656,2328.5,1015.2656,2318.5,1019.2656,2322.5,1015.2656" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1549.5" x2="2324.5" y1="1015.2656" y2="1015.2656"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97" x="1556.5" y="1010.5234">this localInstall</text><polygon fill="#181818" points="1560.5,1040.5762,1550.5,1044.5762,1560.5,1048.5762,1556.5,1044.5762" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1554.5" x2="2329.5" y1="1044.5762" y2="1044.5762"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="12" x="1566.5" y="1039.834">1.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="206" x="1582.5" y="1039.834">!/usr/bin/env bash ### shebang</text><polygon fill="#181818" points="1511,1069.8867,1501,1073.8867,1511,1077.8867,1507,1073.8867" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1505" x2="2329.5" y1="1073.8867" y2="1073.8867"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="244" x="1517" y="1069.1445">oo state # initializes the state machine</text><polygon fill="#181818" points="2560.5,1114.5078,2570.5,1118.5078,2560.5,1122.5078,2564.5,1118.5078" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="2330.5" x2="2566.5" y1="1118.5078" y2="1118.5078"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="90" x="2337.5" y="1098.4551">user get home</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="214" x="2341.5" y="1113.7656"># hack to make sure the pm is set</text><polygon fill="#181818" points="1560.5,1143.8184,1550.5,1147.8184,1560.5,1151.8184,1556.5,1147.8184" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1554.5" x2="2329.5" y1="1147.8184" y2="1147.8184"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99" x="1566.5" y="1143.0762">starts new bash</text><line style="stroke:#181818;stroke-width:1.0;" x1="1549.5" x2="1591.5" y1="1192.4395" y2="1192.4395"/><line style="stroke:#181818;stroke-width:1.0;" x1="1591.5" x2="1591.5" y1="1192.4395" y2="1205.4395"/><line style="stroke:#181818;stroke-width:1.0;" x1="1550.5" x2="1591.5" y1="1205.4395" y2="1205.4395"/><polygon fill="#181818" points="1560.5,1201.4395,1550.5,1205.4395,1560.5,1209.4395,1556.5,1205.4395" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="1556.5" y="1172.3867">source .bashrc</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="204" x="1560.5" y="1187.6973">[oosh sshConfig] has started &gt; |</text><path d="M10,1227.4395 L185,1227.4395 L185,1234.75 L175,1244.75 L10,1244.75 L10,1227.4395 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="630.166" style="stroke:#000000;stroke-width:1.5;" width="2360" x="10" y="1227.4395"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="130" x="25" y="1241.0078">Remote Installation</text><polygon fill="#181818" points="874,1262.0605,884,1266.0605,874,1270.0605,878,1266.0605" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="41.5" x2="880" y1="1266.0605" y2="1266.0605"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="205" x="48.5" y="1261.3184">ossh install &lt;remoteSSHconfig&gt;</text><line style="stroke:#181818;stroke-width:1.0;" x1="886" x2="928" y1="1295.3711" y2="1295.3711"/><line style="stroke:#181818;stroke-width:1.0;" x1="928" x2="928" y1="1295.3711" y2="1308.3711"/><line style="stroke:#181818;stroke-width:1.0;" x1="887" x2="928" y1="1308.3711" y2="1308.3711"/><polygon fill="#181818" points="897,1304.3711,887,1308.3711,897,1312.3711,893,1308.3711" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113" x="893" y="1290.6289">private.push.oosh</text><polygon fill="#181818" points="366,1333.6816,356,1337.6816,366,1341.6816,362,1337.6816" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="360" x2="885" y1="1337.6816" y2="1337.6816"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="507" x="372" y="1332.9395">init/oosh mode ssh &lt;remoteSSHconfig&gt; &lt;localSSHconfig&gt; &lt;localOSSH_MODE&gt;</text><path d="M306.5,1352.6816 L368.5,1352.6816 L368.5,1359.9922 L358.5,1369.9922 L306.5,1369.9922 L306.5,1352.6816 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="383.9922" style="stroke:#000000;stroke-width:1.5;" width="2053.5" x="306.5" y="1352.6816"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="321.5" y="1366.25">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="62" x="383.5" y="1365.3164">[mode ssh]</text><polygon fill="#181818" points="1537.5,1387.3027,1547.5,1391.3027,1537.5,1395.3027,1541.5,1391.3027" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="355" x2="1543.5" y1="1391.3027" y2="1391.3027"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="957" x="362" y="1386.5605">"$BASH_FILE" -xc "$OOSH_DIR/this call ossh install.continue.local $SSH_CONFIG_FROM_REMOTE $SSH_CONFIG_NAME_USED_FOR_LOCAL $DEV_MODE"</text><polygon fill="#181818" points="2318.5,1416.6133,2328.5,1420.6133,2318.5,1424.6133,2322.5,1420.6133" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1549.5" x2="2324.5" y1="1420.6133" y2="1420.6133"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="757" x="1556.5" y="1415.8711">this call ossh install.continue.local $SSH_CONFIG_FROM_REMOTE $SSH_CONFIG_NAME_USED_FOR_LOCAL $DEV_MODE"</text><polygon fill="#181818" points="897,1445.9238,887,1449.9238,897,1453.9238,893,1449.9238" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="891" x2="2329.5" y1="1449.9238" y2="1449.9238"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="703" x="903" y="1445.1816">ossh install.continue.local $SSH_CONFIG_FROM_REMOTE $SSH_CONFIG_NAME_USED_FOR_LOCAL $DEV_MODE"</text><polygon fill="#181818" points="2318.5,1475.2344,2328.5,1479.2344,2318.5,1483.2344,2322.5,1479.2344" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="886" x2="2324.5" y1="1479.2344" y2="1479.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="893" y="1474.4922">return 0</text><polygon fill="#181818" points="1560.5,1504.5449,1550.5,1508.5449,1560.5,1512.5449,1556.5,1508.5449" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1554.5" x2="2329.5" y1="1508.5449" y2="1508.5449"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="1566.5" y="1503.8027">return 0</text><polygon fill="#181818" points="366,1533.8555,356,1537.8555,366,1541.8555,362,1537.8555" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="360" x2="1548.5" y1="1537.8555" y2="1537.8555"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="372" y="1533.1133">return 0</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="306.5" x2="2360" y1="1546.8555" y2="1546.8555"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="67" x="311.5" y="1557.4902">[mode user]</text><polygon fill="#181818" points="1537.5,1578.1211,1547.5,1582.1211,1537.5,1586.1211,1541.5,1582.1211" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="355" x2="1543.5" y1="1582.1211" y2="1582.1211"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="957" x="362" y="1577.3789">"$BASH_FILE" -xc "$OOSH_DIR/this call ossh install.continue.local $SSH_CONFIG_FROM_REMOTE $SSH_CONFIG_NAME_USED_FOR_LOCAL $DEV_MODE"</text><polygon fill="#181818" points="2318.5,1607.4316,2328.5,1611.4316,2318.5,1615.4316,2322.5,1611.4316" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1549.5" x2="2324.5" y1="1611.4316" y2="1611.4316"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="757" x="1556.5" y="1606.6895">this call ossh install.continue.local $SSH_CONFIG_FROM_REMOTE $SSH_CONFIG_NAME_USED_FOR_LOCAL $DEV_MODE"</text><polygon fill="#181818" points="897,1636.7422,887,1640.7422,897,1644.7422,893,1640.7422" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="891" x2="2329.5" y1="1640.7422" y2="1640.7422"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="703" x="903" y="1636">ossh install.continue.local $SSH_CONFIG_FROM_REMOTE $SSH_CONFIG_NAME_USED_FOR_LOCAL $DEV_MODE"</text><polygon fill="#181818" points="2318.5,1666.0527,2328.5,1670.0527,2318.5,1674.0527,2322.5,1670.0527" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="886" x2="2324.5" y1="1670.0527" y2="1670.0527"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="893" y="1665.3105">return 0</text><polygon fill="#181818" points="1560.5,1695.3633,1550.5,1699.3633,1560.5,1703.3633,1556.5,1699.3633" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1554.5" x2="2329.5" y1="1699.3633" y2="1699.3633"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="1566.5" y="1694.6211">return 0</text><polygon fill="#181818" points="366,1724.6738,356,1728.6738,366,1732.6738,362,1728.6738" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="360" x2="1548.5" y1="1728.6738" y2="1728.6738"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="372" y="1723.9316">return 0</text><polygon fill="#181818" points="874,1760.9844,884,1764.9844,874,1768.9844,878,1764.9844" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="355" x2="880" y1="1764.9844" y2="1764.9844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="362" y="1760.2422">return 0</text><line style="stroke:#181818;stroke-width:1.0;" x1="886" x2="928" y1="1794.2949" y2="1794.2949"/><line style="stroke:#181818;stroke-width:1.0;" x1="928" x2="928" y1="1794.2949" y2="1807.2949"/><line style="stroke:#181818;stroke-width:1.0;" x1="887" x2="928" y1="1807.2949" y2="1807.2949"/><polygon fill="#181818" points="897,1803.2949,887,1807.2949,897,1811.2949,893,1807.2949" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="600" x="893" y="1789.5527">ssh $sshConfigHost "bash /home/$user/oosh/ossh continue.local.install from $(ossh.get.url)"</text><line style="stroke:#181818;stroke-width:1.0;" x1="886" x2="928" y1="1836.6055" y2="1836.6055"/><line style="stroke:#181818;stroke-width:1.0;" x1="928" x2="928" y1="1836.6055" y2="1849.6055"/><line style="stroke:#181818;stroke-width:1.0;" x1="887" x2="928" y1="1849.6055" y2="1849.6055"/><polygon fill="#181818" points="897,1845.6055,887,1849.6055,897,1853.6055,893,1849.6055" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="279" x="893" y="1831.8633">ossh.install.finish.local &lt;remoteSSHconfig&gt;</text><path d="M10,1871.6055 L275,1871.6055 L275,1878.916 L265,1888.916 L10,1888.916 L10,1871.6055 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="240.7949" style="stroke:#000000;stroke-width:1.5;" width="2668.5" x="10" y="1871.6055"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="220" x="25" y="1885.1738">Reconfiguration and Exit of oosh</text><polygon fill="#181818" points="2626.5,1906.2266,2636.5,1910.2266,2626.5,1914.2266,2630.5,1910.2266" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="41.5" x2="2632.5" y1="1910.2266" y2="1910.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="270" x="48.5" y="1905.4844">exit $ERROR_CODE_RECONFIG(defualt is 7)</text><polygon fill="#181818" points="2341.5,1935.5371,2331.5,1939.5371,2341.5,1943.5371,2337.5,1939.5371" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="2335.5" x2="2637.5" y1="1939.5371" y2="1939.5371"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="69" x="2347.5" y="1934.7949">this.restart</text><path d="M1516,1954.5371 L1578,1954.5371 L1578,1961.8477 L1568,1971.8477 L1516,1971.8477 L1516,1954.5371 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="150.8633" style="stroke:#000000;stroke-width:1.5;" width="1152.5" x="1516" y="1954.5371"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="1531" y="1968.1055">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="272" x="1593" y="1967.1719">[$RETURN_VALUE = $ERROR_CODE_RECONFIG]</text><line style="stroke:#181818;stroke-width:1.0;" x1="2330.5" x2="2372.5" y1="2008.4688" y2="2008.4688"/><line style="stroke:#181818;stroke-width:1.0;" x1="2372.5" x2="2372.5" y1="2008.4688" y2="2021.4688"/><line style="stroke:#181818;stroke-width:1.0;" x1="2331.5" x2="2372.5" y1="2021.4688" y2="2021.4688"/><polygon fill="#181818" points="2341.5,2017.4688,2331.5,2021.4688,2341.5,2025.4688,2337.5,2021.4688" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107" x="2337.5" y="1988.416">this.restart again</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="154" x="2341.5" y="2003.7266"># exited back into this 7</text><polygon fill="#181818" points="1560.5,2062.0898,1550.5,2066.0898,1560.5,2070.0898,1556.5,2066.0898" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1554.5" x2="2329.5" y1="2066.0898" y2="2066.0898"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="1566.5" y="2046.0371">source .bashrc</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="288" x="1570.5" y="2061.3477">[oosh sshConfig] has started reconfigured &gt; |</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1516" x2="2668.5" y1="2075.0898" y2="2075.0898"/><polygon fill="#181818" points="2626.5,2093.4004,2636.5,2097.4004,2626.5,2101.4004,2630.5,2097.4004" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="2330.5" x2="2632.5" y1="2097.4004" y2="2097.4004"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="284" x="2337.5" y="2092.6582">finally exiting oosh (in this.start case restart)</text><path d="M10,2126.4004 L195,2126.4004 L195,2133.7109 L185,2143.7109 L10,2143.7109 L10,2126.4004 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="46.6211" style="stroke:#000000;stroke-width:1.5;" width="542.5" x="10" y="2126.4004"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="140" x="25" y="2139.9688">Local De-Installation</text><polygon fill="#181818" points="461,2161.0215,471,2165.0215,461,2169.0215,465,2165.0215" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="41.5" x2="467" y1="2165.0215" y2="2165.0215"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="48.5" y="2160.2793">init/deinstall.oosh</text><!--MD5=[7e3ce4a318fd879ed008c9527f024953]
@startuml
actor Actor as a
participant state
participant sh
participant "init/oosh" as oosh 
participant "init/deinstall.oosh" as deinstall.oosh 
participant ossh
participant oo
participant bash
participant this

a -> state: state next
group state next
    alt curl
    else [0]    = not.installed
    else [1]    = initialized
    else [2]    = setup
    else [3]    = all.states.added
    else [4]    = started
    else [11]   = remote.install.started
    else [12]   = local.install.started
    else [13]   = priviledges.checked
    else [20]   = user.rights.only
    else [21]   = user.installation.done
    else [22]   = user.mode.release
    else [23]   = user.mode.dev
    else [30]   = root.rights
    else [31]   = root.shared.dev.folder.created
        state -> oo: oo private.check.root.shared.dev.folder.created $script $stageTo $stateFound
        alt as a user
            oo -> oosh: sudo ~/oosh/init/oosh mode user user.$USER localhost dev
                    oosh -> bash: "$BASH_FILE" -xc "$OOSH_DIR/this call ossh install.continue.local $SSH_CONFIG_FROM_REMOTE $SSH_CONFIG_NAME_USED_FOR_LOCAL $DEV_MODE"
                    bash -> this: this call ossh install.continue.local $SSH_CONFIG_FROM_REMOTE $SSH_CONFIG_NAME_USED_FOR_LOCAL $DEV_MODE"
                    this -> ossh: ossh install.continue.local $SSH_CONFIG_FROM_REMOTE $SSH_CONFIG_NAME_USED_FOR_LOCAL $DEV_MODE"
                    ossh -> this: return 0
                    this -> bash: return 0
                    bash -> oosh: return 0
            oosh -> oo: return 0
            oo -> state: return 2 WORNG!
        else as root
        end
    else [32]   = root.dev.keys.installed
    else [33]   = root.installation.done
    else [40]   = user.shared.dev.folder.linked
    else [41]   = user.state.machine.synced.with.root
    else [50]   = headless.setup.started
    else [51]   = headless.setup.finished
    else [60]   = once.setup.started
    else [61]   = once.setup.finished
    else [99]   = finished
    else [6]    = to.be.deleted
    end
end

group Local Installation
    a -> oosh: init/oosh
    oosh -> sh: #!/bin/sh ### shebang
    sh -> bash: bash this localInstall
    bash -> this: this localInstall
    this -> bash: #!/usr/bin/env bash ### shebang
    this -> oo: oo state # initializes the state machine
    this -> user: user get home \n # hack to make sure the pm is set
    this -> bash: starts new bash
    bash -> bash: source .bashrc \n [oosh sshConfig] has started > |
end
group Remote Installation

    a -> ossh: ossh install <remoteSSHconfig> 

    ossh -> ossh: private.push.oosh
    ossh -> oosh: init/oosh mode ssh <remoteSSHconfig> <localSSHconfig> <localOSSH_MODE>
    alt mode ssh
        oosh -> bash: "$BASH_FILE" -xc "$OOSH_DIR/this call ossh install.continue.local $SSH_CONFIG_FROM_REMOTE $SSH_CONFIG_NAME_USED_FOR_LOCAL $DEV_MODE"
        bash -> this: this call ossh install.continue.local $SSH_CONFIG_FROM_REMOTE $SSH_CONFIG_NAME_USED_FOR_LOCAL $DEV_MODE"
        this -> ossh: ossh install.continue.local $SSH_CONFIG_FROM_REMOTE $SSH_CONFIG_NAME_USED_FOR_LOCAL $DEV_MODE"
        ossh -> this: return 0
        this -> bash: return 0
        bash -> oosh: return 0
    else mode user
        oosh -> bash: "$BASH_FILE" -xc "$OOSH_DIR/this call ossh install.continue.local $SSH_CONFIG_FROM_REMOTE $SSH_CONFIG_NAME_USED_FOR_LOCAL $DEV_MODE"
        bash -> this: this call ossh install.continue.local $SSH_CONFIG_FROM_REMOTE $SSH_CONFIG_NAME_USED_FOR_LOCAL $DEV_MODE"
        this -> ossh: ossh install.continue.local $SSH_CONFIG_FROM_REMOTE $SSH_CONFIG_NAME_USED_FOR_LOCAL $DEV_MODE"
        ossh -> this: return 0
        this -> bash: return 0
        bash -> oosh: return 0
    end
    oosh -> ossh: return 0
    
    ossh -> ossh: ssh $sshConfigHost "bash /home/$user/oosh/ossh continue.local.install from $(ossh.get.url)"
    ossh -> ossh: ossh.install.finish.local <remoteSSHconfig>
end
group Reconfiguration and Exit of oosh
    a -> exit: exit $ERROR_CODE_RECONFIG(defualt is 7)
    exit -> this: this.restart
    alt $RETURN_VALUE = $ERROR_CODE_RECONFIG
        this -> this: this.restart again \n # exited back into this 7
        this -> bash: source .bashrc \n [oosh sshConfig] has started reconfigured > |
    else
        this -> exit: finally exiting oosh (in this.start case restart)
    end
end
group Local De-Installation
    a -> deinstall.oosh: init/deinstall.oosh
end
@enduml

PlantUML version 1.2022.5(Sat Apr 30 12:55:52 CEST 2022)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: GB
--></g></svg>