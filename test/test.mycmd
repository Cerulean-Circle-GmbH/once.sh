#!/bin/bash
clear
#export PS4='\033[90m+${LINENO} in ${#BASH_SOURCE[@]}>${FUNCNAME[0]}:${BASH_SOURCE[@]##*/} \033[0m'
#set -x

level=$1
if [ -z "$level" ]; then
  level=3
fi
echo "starting: $0 <LOG_LEVEL=$level>"

source test.suite

test.case - "parameter and function oder" \
  mycmd 3 f g 1 a b c


echo "
Test 2 
===================================================================="
mycmd log log.level $level log warn.log test log important.log cool 2 d e 3 f g 1 a b c


test.case - "2a)  same as 2 but through test.case" \
  mycmd log log.level $level log warn.log test log important.log cool 2 d e 3 f g 1 a b c

test.case - "show usage: since here init never was sourced, log levels is default on 3!" \
  mycmd


echo "
Test 4a init and call non sourced function mycmd.3 fails as expected 
===================================================================="
source init
log.level $level

mycmd.3 e f
echo "RETURN: $RETURN_VALUE  Result: $RESULT 
====================================================================

"

echo "
Test 4b sourcing and calling mycmd.2 and printing results 
===================================================================="

this.call mycmd mycmd.2 d e
echo "RETURN: $RETURN_VALUE  Result: $RESULT 
====================================================================

"


echo "Test 5  re-sourcing and calling mycmd.3 and getting an error 
===================================================================="

mycmd.3 e f
echo "RETURN: $RETURN_VALUE  Result: $RESULT 
====================================================================

"

echo "Test 6  getting the absolute path to this script ./mycmd 
===================================================================="

this.absolutePath ./mycmd
echo "RETURN: $RETURN_VALUE  Result: $RESULT 
====================================================================

"
this.absolutePath
echo "RETURN: $RETURN_VALUE  Result: $RESULT 
====================================================================

"

this.caller
echo "RETURN: $RETURN_VALUE  Result: $RESULT 
====================================================================

"

this.caller.function
echo "RETURN: $RETURN_VALUE  Result: $RESULT 
====================================================================

"